(function(a){jQuery.fn.linerPlayer=function(c){c=a.extend({shuffle:!1,autoplay:!1,accentColor:"#008DDE",firstPlaying:0,supplied:"mp3, m4a",preload:"auto",loop:!1,volume:1,veryThin:!1,roundedCorners:!1,slideAlbumsName:!0,nowplaying2title:!1,pluginPath:"",playlist:[{title:"Add Music",artist:!1,album:"Just one lonely sigle",mp3:!1,oga:!1,m4a:!1,cover:!1}]},c);return this.each(function(){function w(d){h.progress.slider({animate:"fast",max:100,range:"min",step:.1,value:0,slide:function(d,f){var c=g.status.seekPercent,
x=f.value;0<c?a(b.cssSelector.jPlayer).jPlayer("playHead",100/c*x):setTimeout(function(){h.progress.slider("value",0)},0)}});h.volume.slider({animate:!0,max:1,range:"min",step:.01,value:g.options.volume,slide:function(d,f){var c=f.value;a(b.cssSelector.jPlayer).jPlayer("option","muted",!1);a(b.cssSelector.jPlayer).jPlayer("option","volume",c)}})}function p(d){var e=-1,f="";a(b.cssSelector.cssSelectorAncestor+" .jp-playlist li").each(function(){f='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDhGOTczMkUyNUY4MTFFNEJDNDdFMTBDNjc0MDA0NDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDhGOTczMkYyNUY4MTFFNEJDNDdFMTBDNjc0MDA0NDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowOEY5NzMyQzI1RjgxMUU0QkM0N0UxMEM2NzQwMDQ0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowOEY5NzMyRDI1RjgxMUU0QkM0N0UxMEM2NzQwMDQ0NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq6fqRoAAAAQSURBVHjaYvj//z8DQIABAAj8Av7bok0WAAAAAElFTkSuQmCC" class="new-jp-cover"><div class="info"><h6><a class="new-jp-title">No Title</a></h6><a class="new-jp-artist" data-cd="">No Band</a></div><div class="clr"></div><div class="controls"><a class="playBtn"></a></div>';
e++;a(this).html(f);a(this).data("i",e);y(d,e)});a(b.cssSelector.cssSelectorAncestor+" .jp-playlist li, "+b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-play, "+b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-pause").unbind("click",q).bind("click",q);a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-artist").text(a(d.jPlayer.options.cssSelectorAncestor+" .playlist ul li:nth-child("+(k+1)+") .new-jp-artist").text());a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .jp-title").text(a(d.jPlayer.options.cssSelectorAncestor+
" .playlist ul li:nth-child("+(k+1)+") .new-jp-title").text());a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-cd").text(a(d.jPlayer.options.cssSelectorAncestor+" .playlist ul li:nth-child("+(k+1)+") .new-jp-artist").data("cd"))}function y(d,e){var f=!1,c=a(b.cssSelector.cssSelectorAncestor+" .jp-playlist li:nth-child("+(e+1)+")");b.playlist[e].cover?c.find(".new-jp-cover").attr("src",b.playlist[e].cover):c.find(".new-jp-cover").addClass("noCover");b.playlist[e].artist&&c.find(".new-jp-artist").text(b.playlist[e].artist);
b.playlist[e].title&&c.find(".new-jp-title").text(b.playlist[e].title);b.playlist[e].album?c.find(".new-jp-artist").data("cd",b.playlist[e].album):c.find(".new-jp-artist").data("cd","Unknown album");b.playlist[e].title&&b.playlist[e].artist&&b.playlist[e].cover||ID3.loadTags(b.playlist[e].mp3,function(){f=ID3.getAllTags(b.playlist[e].mp3);!b.playlist[e].artist&&f.artist&&c.find(".new-jp-artist").text(f.artist);!b.playlist[e].title&&f.title&&c.find(".new-jp-title").text(f.title);b.playlist[e].album?
c.find(".new-jp-artist").data("cd",b.playlist[e].album):f.album?c.find(".new-jp-artist").data("cd",f.album):c.find(".new-jp-artist").data("cd","Unknown album");if(!b.playlist[e].cover){var a=f.picture;if(a){for(var d="",g=0;g<a.data.length;g++)d+=String.fromCharCode(a.data[g]);a="data:"+a.format+";base64,"+window.btoa(d);c.find(".new-jp-cover").attr("src",a);c.find(".new-jp-cover").removeClass("noCover")}else c.find(".new-jp-cover").addClass("noCover")}},{tags:["title","artist","album","picture"]})}
function l(){b.play()}function m(){b.next()}function r(){b.playlist.sort(function(){return.5-Math.random()});n=b.shuffled=!0}function q(d){a(this).hasClass("playing")?a(b.cssSelector.jPlayer).jPlayer("pause"):(b.play(a(this).data("i")),a(b.cssSelector.cssSelectorAncestor+" .playlist li").removeClass("playing"))}function s(b){a(g.options.cssSelectorAncestor+" .allbits").stop().css("width",0).empty();b=Math.round(screen.width/2);for(var c=0;c<b;)c++,heigth=Math.round(10*Math.random())+4,minustop=Math.floor(6-
(heigth-1)/2)+1,a(g.options.cssSelectorAncestor+" .allbits").append('<div class="bit" style="margin-top:'+minustop+"px; height:"+heigth+'px;" ></div>')}var t=c.playlist;t.forEach(function(a,b,c){a.mp3=a.file;a.m4a=a.file});var z="<style>#strm_liner.custom .nowPlaying h5 a:hover,#strm_liner.custom .list li .info h6 a:hover,#strm_liner.custom .list li.jp-playlist-current h6 a{color:"+c.accentColor+";}#strm_liner.custom .ruler>.allbits>.bit,#strm_liner.custom .ruler .ui-slider-range,#strm_liner.custom .volumeControl .ui-slider-range,#strm_liner.custom .list li .playBtn:hover {background-color:"+
c.accentColor+";}#strm_liner.custom .list li.jp-playlist-current .controls {border: 3px solid "+c.accentColor+";}</style>",g=!1,u=!1,n=!1,A=c.shuffle,k=c.firstPlaying,v=a("title").text();a(this).append('<div id="strm_liner" class="custom"><div class="strm_center"><div class="strm_player"><div class="blPlayer"><div class="playControls"><button class="new-jp-previous"><i class="previous"></i></button><button class="new-jp-play"><i class="pause"></i></button><button class="new-jp-pause" style="display:none;"><i class="play"></i></button><button class="new-jp-next"><i class="next"></i></button></div><div class="modeControls"><button class="shuffle jp-shuffle on"></button><button class="shuffle active jp-shuffle-off off"></button><button class="repeat jp-repeat"></button><button class="repeat active jp-repeat-off"></button><button class="openPlaylist icon-list-1"></button></div><div class="volumeControl"><button class="vol vol2 jp-mute"></button><button class="vol0 jp-unmute" style="display:none;"></button><div class="ruler jp-volume-bar"><div class="trailer jp-volume-slider" style="width: 100%;"></div></div></div><div class="nowPlaying"><time class="jp-time-holder"><span class="time jp-current-time">0:00</span><span>/</span><span class="duration jp-duration"><small>loading\u2026</small></span></time><h5 class="track"><div class="track"><span class="title"><a class="jp-title"><small>title\u2026</small></a></span>&nbsp;<span class="band"><a class="new-jp-artist"><small>loading\u2026</small></a></span></div><div class="album"><span class="cd"><a class="new-jp-cd"><small>album\u2026</small></a></span></div></h5><div class="ruler"><div class="jp-play-slider"><div class="buffer jp-seek-bar"></div></div><div class="allbits" style="width:0%"></div></div></div></div></div><div class="playlist"><div><section id="queue"><div class="horizontal jp-playlist"><ul class="queue list"></ul></div></section></div></div></div></div><div id="jplayerLiner" class="jp-jplayer hide"></div>');
c.roundedCorners||a("#strm_liner").addClass("sharpen");c.veryThin&&a("#strm_liner").addClass("veryThin");a("#strm_liner").before(z);a("#strm_liner").find(".nowPlaying .ruler").css("background-color",function(a,b){var c;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(a))return c=a.substring(1).split(""),3==c.length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),c="0x"+c.join(""),"rgba("+[c>>16&255,c>>8&255,c&255].join()+","+b+")";throw Error("Bad color in options. Check # character.");}(c.accentColor,.5));var b=new jPlayerPlaylist({jPlayer:"#jplayerLiner",
cssSelectorAncestor:"#strm_liner"},t,{playlistOptions:{enableRemoveControls:!0},swfPath:c.pluginPath+"js/",supplied:c.supplied,preload:c.preload,loop:c.loop,volume:c.volume,smoothPlayBar:!0,keyEnabled:!0,fullScreen:!0,audioFullScreen:!0,ready:function(d){a(".plManager").click(function(c){c.preventDefault();"clear"==a(this).data("action")&&(a(b.cssSelector.jPlayer).jPlayer("stop"),b.remove(),a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-cd").text(" "),a(d.jPlayer.options.cssSelectorAncestor+
" .nowPlaying .new-jp-artist").text(" "),a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .jp-title").text("Playlist is empty. Add new songs!"),s(),myScroll.refresh());"add"==a(this).data("action")&&(b.add({title:a(this).data("title"),artist:a(this).data("artist"),album:a(this).data("album"),mp3:a(this).data("mp3"),cover:a(this).data("cover")}),p(d),b.play(-1),myScroll.refresh())});480>=screen.width?a("body").css("margin-bottom",1*a("body").css("margin-bottom").split("px")[0].split("em")[0]+
88):a("body").css("margin-bottom",1*a("body").css("margin-bottom").split("px")[0].split("em")[0]+58);d.jPlayer.status.noVolume&&a(d.jPlayer.options.cssSelectorAncestor+" .strm_player").addClass("volHidden");g.options.loop?a(b.cssSelector.jPlayer).unbind(a.jPlayer.event.ended).bind(a.jPlayer.event.ended,l):a(b.cssSelector.jPlayer).unbind(a.jPlayer.event.ended).bind(a.jPlayer.event.ended,m);c.nowplaying2title&&(v&&a(b.cssSelector.jPlayer).bind(a.jPlayer.event.pause,function(){a("title").text(v)}),a(b.cssSelector.jPlayer).bind(a.jPlayer.event.play,
function(){a("title").text(a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .jp-title").text()+" \u2014 "+a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-artist").text())}));A&&(a(b.cssSelector.cssSelectorAncestor+" .jp-shuffle").hide(),a(b.cssSelector.cssSelectorAncestor+" .jp-shuffle-off").show(),r());p(d);myScroll=new IScroll(d.jPlayer.options.cssSelectorAncestor+" .horizontal",{scrollX:!0,scrollY:!1,scrollbars:!0,mouseWheel:!0,interactiveScrollbars:!0,scrollbars:"custom",shrinkScrollbars:"scale",
fadeScrollbars:!0});b.select(k);g=d.jPlayer;w(d);u=!0;c.autoplay&&!d.jPlayer.status.noVolume&&(a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-play").addClass("playing").hide(),a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-pause").show().addClass("playing"),b.play());c.slideAlbumsName&&(setTimeout(function(){a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying h5").removeClass("track").addClass("album")},2500),setTimeout(function(){a(d.jPlayer.options.cssSelectorAncestor+
" .nowPlaying h5").removeClass("album").addClass("track")},6500),setInterval(function(){a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying h5").removeClass("track").addClass("album");setTimeout(function(){a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying h5").removeClass("album").addClass("track")},4500)},1E4));a(d.jPlayer.options.cssSelectorAncestor+" .strm_player").addClass("show")},volumechange:function(d){g=d.jPlayer;d.jPlayer.options.muted?h.volume.slider("value",0):h.volume.slider("value",
d.jPlayer.options.volume);0==a(b.cssSelector.jPlayer).jPlayer("option","volume")?a(d.jPlayer.options.cssSelectorAncestor+" .vol").removeClass("volmute").removeClass("vol0").removeClass("vol1").removeClass("vol2").addClass("volmute"):.2>a(b.cssSelector.jPlayer).jPlayer("option","volume")?a(d.jPlayer.options.cssSelectorAncestor+" .vol").removeClass("volmute").removeClass("vol0").removeClass("vol1").removeClass("vol2").addClass("vol0"):.7>a(b.cssSelector.jPlayer).jPlayer("option","volume")?a(d.jPlayer.options.cssSelectorAncestor+
" .vol").removeClass("volmute").removeClass("vol0").removeClass("vol1").removeClass("vol2").addClass("vol1"):1>=a(b.cssSelector.jPlayer).jPlayer("option","volume")&&a(d.jPlayer.options.cssSelectorAncestor+" .vol").removeClass("volmute").removeClass("vol0").removeClass("vol1").removeClass("vol2").addClass("vol2")},setmedia:function(d){a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying h5").removeClass("album").addClass("track");n&&(p(d),n=!1);a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-artist").text(a(d.jPlayer.options.cssSelectorAncestor+
" .playlist ul li:nth-child("+(b.current+1)+") .new-jp-artist").text());a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .jp-title").text(a(d.jPlayer.options.cssSelectorAncestor+" .playlist ul li:nth-child("+(b.current+1)+") .new-jp-title").text());a(d.jPlayer.options.cssSelectorAncestor+" .nowPlaying .new-jp-cd").text(a(d.jPlayer.options.cssSelectorAncestor+" .playlist ul li:nth-child("+(b.current+1)+") .new-jp-artist").data("cd"));s()},keyBindings:{play:{key:179,fn:function(a){a.status.paused?
a.play():a.pause()}},stop:{key:178,fn:function(a){a.stop()}},next:{key:176,fn:function(a){b.next()}},previous:{key:177,fn:function(a){b.previous()}},volumeUp:{key:void 0,fn:function(a){return!1}},volumeDown:{key:void 0,fn:function(a){return!1}}},timeupdate:function(b){g=b.jPlayer;u&&(h.progress.slider("value",b.jPlayer.status.currentPercentAbsolute),a(b.jPlayer.options.cssSelectorAncestor+" .allbits").stop().animate({width:b.jPlayer.status.currentPercentAbsolute+"%"},"fast"))}}),h={progress:a(this).find(".jp-play-slider"),
volume:a(this).find(".jp-volume-slider")};a(b.cssSelector.cssSelectorAncestor+" .new-jp-next").click(function(){b.next()});a(b.cssSelector.cssSelectorAncestor+" .new-jp-previous").click(function(){b.previous()});a(b.cssSelector.cssSelectorAncestor+" .jp-repeat").click(function(){a(b.cssSelector.jPlayer).unbind(a.jPlayer.event.ended,l).unbind(a.jPlayer.event.ended,m).bind(a.jPlayer.event.ended,l);a(b.cssSelector.jPlayer).jPlayer("option","loop",!0)});a(b.cssSelector.cssSelectorAncestor+" .jp-repeat-off").click(function(){a(b.cssSelector.jPlayer).unbind(a.jPlayer.event.ended,
l).unbind(a.jPlayer.event.ended,m).bind(a.jPlayer.event.ended,m);a(b.cssSelector.jPlayer).jPlayer("option","loop",!1)});a(b.cssSelector.jPlayer).bind(a.jPlayer.event.play,function(){a(b.cssSelector.cssSelectorAncestor+" .playlist li").removeClass("playing");a(b.cssSelector.cssSelectorAncestor+" .jp-playlist li:nth-child("+(b.current+1)+")").addClass("playing");a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-play").addClass("playing").hide();a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-pause").show().addClass("playing")});
a(b.cssSelector.jPlayer).bind(a.jPlayer.event.pause,function(){a(b.cssSelector.cssSelectorAncestor+" .jp-playlist li:nth-child("+(b.current+1)+")").removeClass("playing");a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-pause").removeClass("playing").hide();a(b.cssSelector.cssSelectorAncestor+" .playControls .new-jp-play").show().removeClass("playing")});a(b.cssSelector.cssSelectorAncestor+" .jp-shuffle").click(function(){r()});a(b.cssSelector.cssSelectorAncestor+" .jp-shuffle-off").click(function(){b._originalPlaylist();
n=!0})})}})(jQuery);